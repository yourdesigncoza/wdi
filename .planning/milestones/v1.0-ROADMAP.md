# Milestone v1.0: MVP

**Status:** SHIPPED 2026-02-08
**Phases:** 01-09 (10 phases incl. 02.1)
**Total Plans:** 43

## Overview

WillCraft SA v1.0 delivers a complete AI-powered will generation platform for South Africa. From POPIA-compliant infrastructure through conversational AI data collection, complex estate handling, dual-LLM verification, professional PDF generation, PayFast payment integration, post-purchase updates, and supplementary documents (living will, funeral wishes). Each phase delivered coherent, verifiable capabilities while maintaining strict boundaries against unauthorized practice of law.

## Phases

### Phase 01: Foundation & Compliance
**Goal**: Establish secure infrastructure with POPIA compliance, UPL prevention, and attorney-approved clause library as architectural constraints
**Depends on**: Nothing (first phase)
**Requirements**: COMP-01, COMP-02, COMP-03, COMP-04
**Plans**: 5 plans in 3 waves

Plans:
- [x] 01-01-PLAN.md — PostgreSQL schema and migrations (consent, clauses, audit)
- [x] 01-02-PLAN.md — FastAPI with POPIA consent middleware and endpoints
- [x] 01-03-PLAN.md — React app with blocking consent modal
- [x] 01-04-PLAN.md — Clause library service with version control
- [x] 01-05-PLAN.md — UPL filter for AI output compliance

### Phase 02: Authentication
**Goal**: Users can securely create accounts and access the platform via Clerk
**Depends on**: Phase 1
**Requirements**: AUTH-01, AUTH-02, AUTH-03, AUTH-04
**Plans**: 3 plans in 1 wave

Plans:
- [x] 02-01-PLAN.md — Clerk React integration (ClerkProvider, auth UI, authenticated API client)
- [x] 02-02-PLAN.md — FastAPI Clerk middleware (JWKS verification, User model, dual-gate enforcement)
- [x] 02-03-PLAN.md — Wire Bearer token injection into all will API calls (gap closure)

### Phase 02.1: DaisyUI Integration (INSERTED)
**Goal**: Install DaisyUI v5 component library and migrate existing frontend components to DaisyUI classes for consistent, themeable UI before building conversation interface
**Depends on**: Phase 2
**Requirements**: UI consistency, theme support, component standardization
**Plans**: 3 plans in 2 waves

Plans:
- [x] 02.1-01-PLAN.md — Install DaisyUI, configure themes, create ThemeToggle, migrate App.tsx
- [x] 02.1-02-PLAN.md — Migrate ConsentModal, PrivacyPolicy, InfoOfficerContact to DaisyUI
- [x] 02.1-03-PLAN.md — Fix theme init on new tabs and back button fallback navigation (gap closure)

### Phase 03: Core Will Conversation
**Goal**: Users can create a basic will through AI-guided conversation
**Depends on**: Phase 2
**Requirements**: WILL-01 through WILL-08, AI-01 through AI-04
**Plans**: 8 plans in 4 waves

Plans:
- [x] 03-01-PLAN.md — Will data model, Pydantic schemas, Alembic migration 003
- [x] 03-02-PLAN.md — OpenAI service with system prompts and extraction schemas (TDD)
- [x] 03-03-PLAN.md — Frontend foundation: Zustand store, types, Zod schemas, dependencies
- [x] 03-04-PLAN.md — Will CRUD service and API endpoints
- [x] 03-05-PLAN.md — Conversation service with SSE streaming and UPL filtering
- [x] 03-06-PLAN.md — Wizard shell, step indicator, personal/marital forms
- [x] 03-07-PLAN.md — Chat UI with SSE streaming hook and DaisyUI chat bubbles
- [x] 03-08-PLAN.md — Section review, will preview, mobile verification (checkpoint)

### Phase 04: Complex Estate Scenarios
**Goal**: Users can handle advanced estate planning situations
**Depends on**: Phase 3
**Requirements**: CMPLX-01 through CMPLX-05
**Plans**: 5 plans in 3 waves

Plans:
- [x] 04-01-PLAN.md — Backend foundation: migration 004, Will model, schemas, scenario detector, API
- [x] 04-02-PLAN.md — Frontend foundation: types, Zustand store, Zod schemas, scenario hook
- [x] 04-03-PLAN.md — AI prompts, extraction models, UPL filter patterns, clause seeds
- [x] 04-04-PLAN.md — Complex section UI components (trust, usufruct, business, joint)
- [x] 04-05-PLAN.md — Wizard integration: scenario detector, conditional sections, review updates

### Phase 05: AI Verification
**Goal**: Dual-LLM system verifies document completeness and legal compliance before generation
**Depends on**: Phase 4
**Requirements**: AI-05
**Plans**: 4 plans in 3 waves

Plans:
- [x] 05-01-PLAN.md — Gemini SDK setup, config, Will model verification columns, migration 005
- [x] 05-02-PLAN.md — Verification Pydantic schemas and SA Wills Act rules/prompts
- [x] 05-03-PLAN.md — Verification service (Gemini + OpenAI fallback) and API endpoints
- [x] 05-04-PLAN.md — Frontend verification UI, SSE hook, wizard integration (checkpoint)

### Phase 06: Document Generation
**Goal**: Users can generate and preview professionally formatted PDF will documents
**Depends on**: Phase 5
**Requirements**: DOC-01, DOC-02, DOC-03, COMP-05, COMP-06
**Plans**: 4 plans in 3 waves

Plans:
- [x] 06-01-PLAN.md — WeasyPrint install + Jinja2 HTML/CSS will templates
- [x] 06-02-PLAN.md — DocumentGenerationService (clause assembly, variable extraction, PDF generation)
- [x] 06-03-PLAN.md — Document preview API endpoint with disclaimer and status gating
- [x] 06-04-PLAN.md — Frontend: disclaimer confirmation, preview page, wizard integration (checkpoint)

### Phase 07: Payment & Download
**Goal**: Users can pay and download their completed will document
**Depends on**: Phase 6
**Requirements**: DOC-04, DOC-05, DOC-06
**Plans**: 4 plans in 4 waves

Plans:
- [x] 07-01-PLAN.md — Payment model, migration 006, config settings, Pydantic schemas
- [x] 07-02-PLAN.md — PayFast service, download token service, email service + template
- [x] 07-03-PLAN.md — Payment API (initiate, ITN webhook, status) + download API endpoint
- [x] 07-04-PLAN.md — Frontend: PaymentPage, return/cancel/download pages, wizard integration (checkpoint)

### Phase 08: Post-Purchase Features
**Goal**: Users can save progress, resume later, and update their will after purchase
**Depends on**: Phase 7
**Requirements**: AUTH-05, AUTH-06
**Plans**: 4 plans in 4 waves

Plans:
- [x] 08-01-PLAN.md — Backend foundation: migration 007 (version, current_section), new API endpoints
- [x] 08-02-PLAN.md — Frontend auto-save, Zustand-DB sync, loadFromServer, useAutoSave hook
- [x] 08-03-PLAN.md — WillDashboard component, resume flow, updated App.tsx routing
- [x] 08-04-PLAN.md — Post-purchase update flow: paid will editing, re-generation without payment

### Phase 09: Additional Documents
**Goal**: Users can create supplementary estate planning documents
**Depends on**: Phase 6
**Requirements**: ADOC-01, ADOC-02
**Plans**: 3 plans in 3 waves

Plans:
- [x] 09-01-PLAN.md — Backend: model, migration, schemas, service, templates, API endpoints
- [x] 09-02-PLAN.md — Frontend: API client, types, Zod schemas, Zustand store, form components
- [x] 09-03-PLAN.md — Dashboard, preview, routing, WillDashboard integration (checkpoint)

---

## Milestone Summary

**Decimal Phases:**
- Phase 02.1: DaisyUI Integration (inserted after Phase 2 for UI consistency before conversation UI)

**Key Decisions:**
- Fresh start over legacy PHP modernization
- PostgreSQL + Clerk (separate concerns)
- Conversational + structured hybrid UX
- Multi-LLM architecture (OpenAI conversation, Gemini verification)
- Complex wills from v1 (differentiation)
- Pay-per-download model
- JWT httpOnly cookie for POPIA consent
- Jinja2 StrictUndefined for clause rendering
- JSONB section columns for will data
- Dual-event SSE pattern for streaming
- WeasyPrint for PDF generation
- PayFast for payment processing
- Single JSONB content column for additional documents

**Issues Resolved:**
- Alembic JSONB server_default quoting (remove inner single quotes)
- OpenAI Structured Outputs bare dict causing silent 400 errors
- Zustand persist vs DB state mismatch for verification
- Section boundary AI drift (fixed with section boundary prompts)
- DaisyUI chat styling (@source inline fix)
- SA ID Luhn verification prompt fix

**Issues Deferred:**
- Attorney-approved clause text (all clauses PLACEHOLDER)
- Privacy policy and info officer details (placeholders)
- POPIA-compliant SA hosting (deferred to production)
- PayFast sandbox testing (required before production)
- Production deployment for PayFast ITN webhook

**Technical Debt Incurred:**
- Monthly audit_logs partitions need automated creation
- Audit immutability (REVOKE UPDATE/DELETE) must be applied on production DB
- All 12 clause library entries are PLACEHOLDER text

---

_For current project status, see .planning/PROJECT.md_
