# v2.0 Requirements: Legacy Form Gap Analysis

**Source:** Todo 001 — Map legacy form to Phase 3/4
**Completed:** 2026-02-08
**Method:** Compared legacy 10-section form against v1.0 codebase (schemas, extraction, forms, prompts)

## Fully Covered (no action needed)

- Personal Details (name, ID, contact, address)
- Marital Status (all statuses + spouse details + outside SA)
- Legacies/Bequests (person + asset, repeatable)
- Guardians (primary/backup, repeatable)

## Gaps to Address

### GAP-01: Pet Care Section (MISSING — Priority: Medium)

Legacy form had a dedicated pet care section with:
- Pet legatee name
- Monetary benefit for pet care

**Current:** Pets can only be mentioned in generic bequests free text. No structured capture.
**Needed:** New JSONB field or sub-schema, extraction support, optional wizard section triggered by "Do you have pets?"

### GAP-02: Dependants/Children Tracking (PARTIAL — Priority: High)

Legacy form captured per-child:
- Full name
- Relationship (son/daughter/stepchild)
- Date of birth (for minor status calculation)

**Current:** Minors detected only via `is_minor` boolean flag on beneficiaries. No DOB, no explicit parent-child relationship, no dedicated section.
**Needed:** Dedicated children/dependants schema with DOB-based minor calculation, relationship tracking. Feeds into trust and guardian sections.

### GAP-03: Trust Powers Expansion (PARTIAL — Priority: High)

Legacy form had 14 trust power checkboxes:
- Income for maintenance ✓ (exists)
- Capital for education ✓ (exists)
- Discretion re health/welfare ✗
- Medical/dental expenses ✗
- Capital advances ✗
- Income distribution frequency ✗
- Investment powers ✗
- Property management ✗
- Business continuation ✗
- Borrowing powers ✗
- Insurance powers ✗
- Accounting obligations ✗
- Trustee remuneration ✗
- Substitution of trustees ✗

**Current:** Only 2 boolean flags. No minimum trustee count (should be 3+). No trustee independence flag.
**Needed:** Expand TrustProvisionSchema with all 14 powers, add trustee count validation, add independence tracking.

### GAP-04: Executor Limit (PARTIAL — Priority: Medium)

Legacy form supported up to 3 executors with "own vs listed executor" distinction.

**Current:** 1 primary + 1 backup (max 2). No "own vs listed" flag.
**Needed:** Support 1-3 executors as a list. Add executor type (self/professional/personal). Update extraction.

### GAP-05: Estate Division Scenarios (PARTIAL — Priority: Medium)

Legacy form offered 4 pre-defined bequeath scenarios including simultaneous death clause.

**Current:** Single residue distribution with free-text simultaneous death clause.
**Needed:** Structured scenario selection (e.g., "all to spouse", "split among children", "per stirpes", "custom"). Simultaneous death clause as structured data, not free text.

### GAP-06: Living Will Healthcare Details (PARTIAL — Priority: Low)

Legacy form captured:
- Next of kin name + contact
- GP (general practitioner) name + practice number

**Current:** Healthcare proxy captured but no explicit "next of kin" or "GP details" fields.
**Needed:** Add next_of_kin and gp_details fields to LivingWillContent schema.

### GAP-07: Conditional Logic Gaps (Priority: Medium)

Missing conditional triggers:
- "Own vs listed executor?" → different form fields
- "Have pets?" → pet care section
- "Living will?" → next of kin + GP details

**Current:** 5 of 8 legacy conditions implemented.
**Needed:** Wire up remaining 3 conditional flows.

## Summary

| Gap | Section | Priority | Effort |
|-----|---------|----------|--------|
| GAP-01 | Pet Care | Medium | New schema + section |
| GAP-02 | Dependants/Children | High | New schema + AI prompts |
| GAP-03 | Trust Powers | High | Schema expansion + UI |
| GAP-04 | Executor Limit | Medium | Schema change + extraction |
| GAP-05 | Estate Division | Medium | Scenario logic + UI |
| GAP-06 | Living Will Details | Low | 2 new fields |
| GAP-07 | Conditional Logic | Medium | 3 conditional triggers |
